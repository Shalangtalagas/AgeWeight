local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")
local Camera = workspace.CurrentCamera

-- Rarity-based KG generator
local function getRarityBasedKG()
	local roll = math.random(1, 100)
	if roll <= 80 then
		return math.random(300, 400) / 100  -- 3.00 to 4.00 (common)
	elseif roll <= 95 then
		return math.random(401, 600) / 100  -- 4.01 to 6.00 (uncommon)
	else
		return math.random(601, 700) / 100  -- 6.01 to 7.00 (rare)
	end
end

-- Apply to center button only
local function modifyHeldPetAgeAndWeight()
	for _, descendant in ipairs(PlayerGui:GetDescendants()) do
		if descendant:IsA("TextButton") or descendant:IsA("TextLabel") then
			local text = descendant.Text

			local hasAge = string.match(text, "%[Age (%d+)%]")
			local hasWeight = string.match(text, "%[(%d+%.%d+) KG%]")

			if hasAge or hasWeight then
				local absX = descendant.AbsolutePosition.X
				local centerX = Camera.ViewportSize.X / 2

				if math.abs(absX - centerX) < 20 then
					if hasAge then
						local age = tonumber(hasAge)
						if age then
							text = text:gsub("%[Age (%d+)%]", "[Age " .. (age + 50) .. "]")
						end
					end

					if hasWeight then
						local weight = tonumber(hasWeight)
						if weight then
							local add = getRarityBasedKG()
							local newWeight = weight + add
							text = text:gsub("%[(%d+%.%d+) KG%]", string.format("[%.2f KG]", newWeight))
						end
					end

					descendant.Text = text
				end
			end
		end
	end
end

-- Run once (no loop)
modifyHeldPetAgeAndWeight()
